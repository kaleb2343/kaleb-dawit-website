document.addEventListener("DOMContentLoaded",function(){const mobileMenuButton=document.getElementById("mobile-menu-button");const mobileMenu=document.getElementById("mobile-menu");const desktopThemeToggle=document.getElementById("theme-toggle-desktop");const mobileThemeToggle=document.getElementById("theme-toggle-mobile");if(mobileMenuButton&&mobileMenu){mobileMenuButton.addEventListener("click",()=>{mobileMenu.classList.toggle("hidden")});mobileMenu.querySelectorAll("a").forEach(link=>{link.addEventListener("click",()=>{mobileMenu.classList.add("hidden")})})}function applyTheme(theme){if(theme==="light"){document.body.classList.add("light-theme")}else{document.body.classList.remove("light-theme")}updateThemeIcons()}function updateThemeIcons(){const iconClass=document.body.classList.contains("light-theme")?"fa-sun":"fa-moon";const desktopIcon=desktopThemeToggle?desktopThemeToggle.querySelector("i"):null;if(desktopIcon){desktopIcon.classList.remove("fa-sun","fa-moon");desktopIcon.classList.add(iconClass)}const mobileIcon=mobileThemeToggle?mobileThemeToggle.querySelector("i"):null;if(mobileIcon){mobileIcon.classList.remove("fa-sun","fa-moon");mobileIcon.classList.add(iconClass)}}const savedTheme=localStorage.getItem("theme");if(savedTheme){applyTheme(savedTheme)}else{applyTheme("dark")}if(desktopThemeToggle){desktopThemeToggle.addEventListener("click",function(){const currentTheme=document.body.classList.contains("light-theme")?"light":"dark";const newTheme=currentTheme==="light"?"dark":"light";localStorage.setItem("theme",newTheme);applyTheme(newTheme)})}if(mobileThemeToggle){mobileThemeToggle.addEventListener("click",function(){const currentTheme=document.body.classList.contains("light-theme")?"light":"dark";const newTheme=currentTheme==="light"?"dark":"light";localStorage.setItem("theme",newTheme);applyTheme(newTheme)})}function showModal(message){const modal=document.getElementById("myModal");const modalMessage=document.getElementById("modal-message");modalMessage.textContent=message;modal.style.display="flex";setTimeout(()=>{modal.style.display="none"},3e3)}const lightboxModal=document.getElementById("lightboxModal");const lightboxImage=document.getElementById("lightboxImage");const lightboxClose=document.getElementById("lightboxClose");const lightboxPrev=document.getElementById("lightboxPrev");const lightboxNext=document.getElementById("lightboxNext");const lightboxCounter=document.getElementById("lightboxCounter");const lightboxCaption=document.getElementById("lightboxCaption");let currentImages=[];let currentIndex=0;function openLightbox(images,startIndex=0){currentImages=images;currentIndex=startIndex;if(currentImages.length>0){lightboxImage.src=currentImages[currentIndex].src;lightboxModal.style.display="flex";updateLightboxNav();updateLightboxCounter();const nextIndex=(currentIndex+1)%currentImages.length;const prevIndex=(currentIndex-1+currentImages.length)%currentImages.length;const preloadNext=new Image;preloadNext.src=currentImages[nextIndex].src;const preloadPrev=new Image;preloadPrev.src=currentImages[prevIndex].src}}function closeLightbox(){lightboxModal.style.display="none";lightboxCaption.textContent=""}function updateLightboxNav(){if(currentImages.length<=1){lightboxPrev.style.display="none";lightboxNext.style.display="none"}else{lightboxPrev.style.display="block";lightboxNext.style.display="block"}}function updateLightboxCounter(){lightboxCounter.textContent=`${currentIndex+1} of ${currentImages.length}`}function showNextImage(){currentIndex=(currentIndex+1)%currentImages.length;lightboxImage.src=currentImages[currentIndex].src;lightboxCaption.textContent=currentImages[currentIndex].caption;updateLightboxCounter()}function showPrevImage(){currentIndex=(currentIndex-1+currentImages.length)%currentImages.length;lightboxImage.src=currentImages[currentIndex].src;lightboxCaption.textContent=currentImages[currentIndex].caption;updateLightboxCounter()}lightboxClose.addEventListener("click",closeLightbox);lightboxPrev.addEventListener("click",showPrevImage);lightboxNext.addEventListener("click",showNextImage);lightboxModal.addEventListener("click",e=>{if(e.target===lightboxModal){closeLightbox()}});const cardIntervals=new Map;document.querySelectorAll(".project-card").forEach(card=>{const imageContainer=card.querySelector(".project-image-container");const mainImage=imageContainer.querySelector("img");const imagesData=card.getAttribute("data-lightbox-images");const githubRepoLink=card.getAttribute("data-github-repo");let cardImages=[];if(imagesData){try{cardImages=JSON.parse(imagesData)}catch(e){console.error("Error parsing data-lightbox-images:",e)}}let currentCardImageIndex=0;const updateCardImage=()=>{if(cardImages.length>0){mainImage.src=cardImages[currentCardImageIndex].src;mainImage.classList.add("active-card-image");currentCardImageIndex=(currentCardImageIndex+1)%cardImages.length}};if(cardImages.length>0){updateCardImage()}card.addEventListener("click",()=>{if(githubRepoLink){window.open(githubRepoLink,"_blank")}else if(cardImages.length>0){const initialLightboxIndex=(currentCardImageIndex-1+cardImages.length)%cardImages.length;openLightbox(cardImages,initialLightboxIndex)}})})});